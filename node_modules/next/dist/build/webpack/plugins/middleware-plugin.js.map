{"version":3,"sources":["../../../../build/webpack/plugins/middleware-plugin.ts"],"names":["webpack","sources","getMiddlewareRegex","getSortedRoutes","MIDDLEWARE_MANIFEST","MIDDLEWARE_FLIGHT_MANIFEST","MIDDLEWARE_SSR_RUNTIME_WEBPACK","MIDDLEWARE_BUILD_MANIFEST","MIDDLEWARE_REACT_LOADABLE_MANIFEST","MIDDLEWARE_ROUTE","nonNullable","PLUGIN_NAME","MIDDLEWARE_FULL_ROUTE_REGEX","ssrEntries","Map","MiddlewarePlugin","dev","constructor","createAssets","compilation","assets","envPerRoute","entrypoints","middlewareManifest","sortedMiddleware","clientInfo","middleware","version","entrypoint","values","result","exec","name","ssrEntryInfo","get","location","slice","length","replace","files","requireFlightManifest","filter","getFiles","file","endsWith","map","startsWith","env","page","regexp","namedRegex","Object","keys","key","RawSource","JSON","stringify","apply","compiler","hooks","tap","normalModuleFactory","finishModules","moduleGraph","clear","info","entries","match","middlewareEntries","Set","addEntriesFromDependency","dep","module","getModule","add","dependencies","forEach","includeDependencies","queue","buildInfo","usingIndirectEval","error","WebpackError","warnings","push","nextUsedEnvVars","undefined","envName","connections","getOutgoingConnections","connection","set","Array","from","handler","parser","flagModule","state","expression","for","memberChainHandler","_expr","members","layer","callMemberChain","expressionMemberChain","processAssets","stage","Compilation","PROCESS_ASSETS_STAGE_ADDITIONS"],"mappings":"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"}